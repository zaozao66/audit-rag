# 子条款合并功能说明

## 概述

法规文档中经常出现主条款和子条款的层级结构，例如：
- 主条款："第一条 有关事项的规定"
- 子条款："（一）具体内容"、"（二）具体内容"、"（三）具体内容"

之前的版本会将子条款（如"（一）"、"（二）"、"（三）"）单独切分为不同的文本块，这可能导致信息碎片化。新版本改进了这一逻辑，将子条款自动合并到其对应的主条款中。

## 功能特点

1. **智能识别**：自动识别子条款模式（如（一）、（二）、（三）、①、②、③等）
2. **层级合并**：将子条款与其上级主条款合并为一个文本块
3. **结构保持**：保持法规文档的逻辑完整性
4. **兼容性**：不影响其他类型的文档分块逻辑

## 支持的子条款模式

- 中文括号编号：（一）、（二）、（三）、（①）、（②）、（③）
- 英文括号编号：(一)、(二)、(三)、(①)、(②)、(③)

## 与旧版本的区别

| 版本 | 处理方式 | 示例 |
|------|----------|------|
| 旧版本 | 每个子条款单独成块 | "（一）内容1"、"（二）内容2"、"（三）内容3" 各自为独立块 |
| 新版本 | 子条款合并到主条款 | "第一条 规定内容（一）内容1（二）内容2（三）内容3" 为一个块 |

## 应用场景

1. **法规文档处理**：保持法规条文的完整性
2. **合同文档处理**：保持合同条款的逻辑性
3. **政策文件处理**：保持政策条目的关联性

## 技术实现

在 `LawDocumentChunker` 类中：

1. 添加了 `sub_article_patterns` 模式列表来识别子条款
2. 修改了 `_identify_sections` 方法，将子条款附加到最近的父级条款
3. 更新了 `chunk_law_document` 方法，跳过独立的子条款块处理

## 注意事项

1. 子条款合并仅在 `use_law_chunker=true` 时生效
2. 系统会根据文档内容自动判断是否为法规文档
3. 非法规文档仍使用普通分块逻辑